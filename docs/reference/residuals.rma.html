<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Residual Values based on 'rma' Objects — residuals.rma • metafor</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Residual Values based on 'rma' Objects — residuals.rma" />
<meta property="og:description" content="The residuals, rstandard, and rstudent functions compute residuals, corresponding standard errors, and standardized residuals for models fitted with the rma.uni, rma.mh, rma.peto, and rma.mv functions. " />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.5-70</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/index.php/jss/article/view/v036i03/v36i03.pdf">JSS Article (pdf)</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/wviechtb">
    <span class="fas fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor">
    <span class="fas fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Residual Values based on 'rma' Objects</h1>
    
    <div class="hidden name"><code>residuals.rma.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>residuals</code>, <code>rstandard</code>, and <code>rstudent</code> functions compute residuals, corresponding standard errors, and standardized residuals for models fitted with the <code><a href='rma.uni.html'>rma.uni</a></code>, <code><a href='rma.mh.html'>rma.mh</a></code>, <code><a href='rma.peto.html'>rma.peto</a></code>, and <code><a href='rma.mv.html'>rma.mv</a></code> functions. <script id="MathJax-script" async src="../../mathjaxr/doc/mathjax/es5/tex-chtml-full.js"></script></p>
    </div>

    <pre class="usage"><span class='co'># S3 method for rma</span>
<span class='fu'>residuals</span><span class='op'>(</span><span class='va'>object</span>, type<span class='op'>=</span><span class='st'>"response"</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for rma.uni</span>
<span class='fu'>rstandard</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, type<span class='op'>=</span><span class='st'>"marginal"</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for rma.mh</span>
<span class='fu'>rstandard</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for rma.peto</span>
<span class='fu'>rstandard</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for rma.mv</span>
<span class='fu'>rstandard</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, <span class='va'>cluster</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S3 method for rma.uni</span>
<span class='fu'>rstudent</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, progbar<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for rma.mh</span>
<span class='fu'>rstudent</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, progbar<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for rma.peto</span>
<span class='fu'>rstudent</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, progbar<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>...</span><span class='op'>)</span>
<span class='co'># S3 method for rma.mv</span>
<span class='fu'>rstudent</span><span class='op'>(</span><span class='va'>model</span>, <span class='va'>digits</span>, progbar<span class='op'>=</span><span class='cn'>FALSE</span>, <span class='va'>cluster</span>,
         reestimate<span class='op'>=</span><span class='cn'>TRUE</span>, parallel<span class='op'>=</span><span class='st'>"no"</span>, ncpus<span class='op'>=</span><span class='fl'>1</span>, cl<span class='op'>=</span><span class='cn'>NULL</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>an object of class <code>"rma"</code> (for <code>residuals</code>).</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>the type of residuals which should be returned. For <code>residuals</code>, the alternatives are: <code>"response"</code> (default), <code>"rstandard"</code>, <code>"rstudent"</code>, and <code>"pearson"</code>. For <code>rstandard.rma.uni</code>, the alternatives are: <code>"marginal"</code> (default) and <code>"conditional"</code>. See &#8216;Details&#8217;.</p></td>
    </tr>
    <tr>
      <th>model</th>
      <td><p>an object of class <code>"rma"</code> (for <code>residuals</code>) or an object of class <code>"rma.uni"</code>, <code>"rma.mh"</code>, <code>"rma.peto"</code>, or <code>"rma.mv"</code> (for <code>rstandard</code> and <code>rstudent</code>).</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>optional vector to specify a clustering variable to use for computing cluster-level multivariate standardized residuals (only for <code>"rma.mv"</code> objects).</p></td>
    </tr>
    <tr>
      <th>reestimate</th>
      <td><p>logical to specify whether variance/correlation components should be re-estimated after deletion of the \(i\)th study/cluster when computing externally standardized residuals (the default is <code>TRUE</code>).</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>character string to specify whether parallel processing should be used (the default is <code>"no"</code>). For parallel processing, set to either <code>"snow"</code> or <code>"multicore"</code>. See &#8216;Details&#8217;.</p></td>
    </tr>
    <tr>
      <th>ncpus</th>
      <td><p>integer to specify the number of processes to use in the parallel processing.</p></td>
    </tr>
    <tr>
      <th>cl</th>
      <td><p>optional cluster to use if <code>parallel="snow"</code>. If not supplied, a cluster on the local machine is created for the duration of the call.</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>integer to specify the number of decimal places to which the printed results should be rounded (if unspecified, the default is to take the value from the object).</p></td>
    </tr>
    <tr>
      <th>progbar</th>
      <td><p>logical to specify whether a progress bar should be shown (only for <code>rstudent</code>) (the default is <code>FALSE</code>).</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The observed residuals (obtained with <code>residuals</code>) are simply equal to the &#8216;observed - fitted&#8217; values. These can be obtained with <code>residuals(object)</code> (using the default <code>type="response"</code>).</p>
<p>Dividing the observed residuals by the model-implied standard errors of the observed effect sizes or outcomes yields Pearson (or semi-standardized) residuals. These can be obtained with <code>residuals(object, type="pearson")</code>.</p>
<p>Dividing the observed residuals by their corresponding standard errors yields (internally) standardized residuals. These can be obtained with <code>rstandard</code> or <code>residuals(object, type="rstandard")</code>.</p>
<p>The <code>rstudent</code> function (or <code>residuals(object, type="rstudent")</code>) calculates externally standardized residuals (also called standardized deleted residuals or (externally) studentized residuals). The externally standardized residual for the \(i\)th case is obtained by deleting the \(i\)th case from the dataset, fitting the model based on the remaining cases, calculating the predicted value for the \(i\)th case based on the fitted model, taking the difference between the observed and the predicted value for the \(i\)th case (which yields the deleted residual), and then standardizing the deleted residual based on its standard error.</p>
<p>If a particular study fits the model, its standardized residual follows (asymptotically) a standard normal distribution. A large standardized residual for a study therefore may suggest that the study does not fit the assumed model (i.e., it may be an outlier).</p>
<p>For <code>"rma.uni"</code> objects, <code>rstandard.rma.uni</code> also can compute conditional residuals (when <code>type="conditional"</code>), which are the deviations of the observed effect sizes or outcomes from the best linear unbiased predictions (BLUPs) of the study-specific true effect sizes or outcomes (see <code><a href='blup.html'>blup.rma.uni</a></code>).</p>
<p>For <code>"rma.mv"</code> objects, one can specify a clustering variable (via the <code>cluster</code> argument). If specified, <code>rstandard</code> and <code>rstudent</code> also compute cluster-level multivariate (internally or externally) standardized residuals. If all outcomes within a cluster fit the model, then the multivariate standardized residual for the cluster follows (asymptotically) a chi-square distribution with \(k_i\) degrees of freedom (where \(k_i\) denotes the number of outcomes within the cluster).</p>
<p>See also <code><a href='influence.rma.uni.html'>influence.rma.uni</a></code> and <code><a href='influence.rma.mv.html'>influence.rma.mv</a></code> for other leave-one-out diagnostics that are useful for detecting influential cases in models fitted with the <code><a href='rma.uni.html'>rma.uni</a></code> and <code><a href='rma.mv.html'>rma.mv</a></code> functions.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Either a vector with the residuals of the requested type (for <code>residuals</code>) or an object of class <code>"list.rma"</code>, which is a list containing the following components:</p>
<dt>resid</dt><dd><p>observed residuals (for <code>rstandard</code>) or deleted residuals (for <code>rstudent</code>).</p></dd>
   <dt>se</dt><dd><p>corresponding standard errors.</p></dd>
   <dt>z</dt><dd><p>standardized residuals (internally standardized for <code>rstandard</code> or externally standardized for <code>rstudent</code>).</p></dd>

   When a clustering variable is specified for "rma.mv" objects, the returned object is a list with the first element (named obs) as described above and a second element (named cluster of class "list.rma" with:
   <dt>X2</dt><dd><p>cluster-level multivariate standardized residuals.</p></dd>
   <dt>k</dt><dd><p>number of observed effect sizes or outcomes within the clusters.</p></dd>

   The "list.rma" object is formatted and printed with <a href='print.list.rma.html'>print.list.rma</a>.

    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Right now, the externally standardized residuals (obtained with <code>rstudent</code>) are calculated by refitting the model \(k\) times (where \(k\) is the number of studies/clusters). Depending on how large \(k\) is, it may take a few moments to finish the calculations. For complex models fitted with <code><a href='rma.mv.html'>rma.mv</a></code>, this can become computationally expensive.</p>
<p>On machines with multiple cores, one can usually speed things up by delegating the model fitting to separate worker processes, that is, by setting <code>parallel="snow"</code> or <code>parallel="multicore"</code> and <code>ncpus</code> to some value larger than 1 (only for objects of class <code>"rma.mv"</code>). Parallel processing makes use of the <code><a href='https://rdrr.io/r/parallel/parallel-package.html'>parallel</a></code> package, using the <code><a href='https://rdrr.io/r/parallel/makeCluster.html'>makePSOCKcluster</a></code> and <code><a href='https://rdrr.io/r/parallel/clusterApply.html'>parLapply</a></code> functions when <code>parallel="snow"</code> or using <code><a href='https://rdrr.io/r/parallel/mclapply.html'>mclapply</a></code> when <code>parallel="multicore"</code> (the latter only works on Unix/Linux-alikes). With <code><a href='https://rdrr.io/r/parallel/detectCores.html'>parallel::detectCores()</a></code>, one can check on the number of available cores on the local machine.</p>
<p>Alternatively (or in addition to using parallel processing), one can also set <code>reestimate=FALSE</code>, in which case any variance/correlation components in the model are not re-estimated after deleting the \(i\)th study/cluster from the dataset. Doing so only yields an approximation to the externally standardized residuals (and the cluster-level multivariate standardized residuals) that ignores the influence of the \(i\)th study/cluster on the variance/correlation components, but is considerably faster (and often yields similar results).</p>
<p>It may not be possible to fit the model after deletion of the \(i\)th study/cluster from the dataset. This will result in <code>NA</code> values for that study/cluster when calling <code>rstudent</code>.</p>
<p>Also, for <code>"rma.mv"</code> objects with a clustering variable specified, it may not be possible to compute the cluster-level multivariate standardized residual for a particular cluster (if the var-cov matrix of the residuals within a cluster is not of full rank). This will result in <code>NA</code> for that cluster.</p>
<p>For objects of class <code>"rma.mh"</code> and <code>"rma.peto"</code>, <code>rstandard</code> actually computes Pearson (or semi-standardized) residuals.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Wolfgang Viechtbauer <a href='mailto:wvb@metafor-project.org'>wvb@metafor-project.org</a> <a href='http://www.metafor-project.org'>http://www.metafor-project.org</a></p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Hedges, L. V., &amp; Olkin, I. (1985). <em>Statistical methods for meta-analysis</em>. San Diego, CA: Academic Press.</p>
<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1--48. <a href='https://doi.org/10.18637/jss.v036.i03'>https://doi.org/10.18637/jss.v036.i03</a></p>
<p>Viechtbauer, W., &amp; Cheung, M. W.-L. (2010). Outlier and influence diagnostics for meta-analysis. <em>Research Synthesis Methods</em>, <b>1</b>(2), 112--125. <a href='https://doi.org/10.1002/jrsm.11'>https://doi.org/10.1002/jrsm.11</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='rma.uni.html'>rma.uni</a></code>, <code><a href='rma.mh.html'>rma.mh</a></code>, <code><a href='rma.peto.html'>rma.peto</a></code>, <code><a href='rma.glmm.html'>rma.glmm</a></code>, <code><a href='rma.mv.html'>rma.mv</a></code>, <code><a href='influence.rma.uni.html'>influence.rma.uni</a></code>, <code><a href='influence.rma.mv.html'>influence.rma.mv</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### meta-analysis of the log risk ratios using a random-effects model</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rma.uni.html'>rma</a></span><span class='op'>(</span>measure<span class='op'>=</span><span class='st'>"RR"</span>, ai<span class='op'>=</span><span class='va'>tpos</span>, bi<span class='op'>=</span><span class='va'>tneg</span>, ci<span class='op'>=</span><span class='va'>cpos</span>, di<span class='op'>=</span><span class='va'>cneg</span>, data<span class='op'>=</span><span class='va'>dat.bcg</span><span class='op'>)</span>
<span class='fu'>rstudent</span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;      resid     se       z 
#&gt; 1  -0.1822 0.8354 -0.2181 
#&gt; 2  -0.9314 0.7210 -1.2918 
#&gt; 3  -0.6625 0.8778 -0.7547 
#&gt; 4  -0.8131 0.5603 -1.4512 
#&gt; 5   0.5466 0.6448  0.8477 
#&gt; 6  -0.0752 0.6376 -0.1180 
#&gt; 7  -0.9657 0.7407 -1.3037 
#&gt; 8   0.8067 0.5563  1.4501 
#&gt; 9   0.2718 0.6668  0.4076 
#&gt; 10 -0.7183 0.6369 -1.1277 
#&gt; 11  0.4185 0.6255  0.6691 
#&gt; 12  1.2057 0.9348  1.2898 
#&gt; 13  0.7602 0.6400  1.1879 
#&gt; </div><div class='input'>
<span class='co'>### mixed-effects model with absolute latitude as a moderator</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'><a href='rma.uni.html'>rma</a></span><span class='op'>(</span>measure<span class='op'>=</span><span class='st'>"RR"</span>, ai<span class='op'>=</span><span class='va'>tpos</span>, bi<span class='op'>=</span><span class='va'>tneg</span>, ci<span class='op'>=</span><span class='va'>cpos</span>, di<span class='op'>=</span><span class='va'>cneg</span>, mods <span class='op'>=</span> <span class='op'>~</span> <span class='va'>ablat</span>,
           data<span class='op'>=</span><span class='va'>dat.bcg</span><span class='op'>)</span>
<span class='fu'>rstudent</span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span>
</div><div class='output co'>#&gt; 
#&gt;      resid     se       z 
#&gt; 1   0.1488 0.6587  0.2259 
#&gt; 2  -0.2801 0.5811 -0.4819 
#&gt; 3  -0.3906 0.7177 -0.5442 
#&gt; 4  -0.2709 0.4078 -0.6644 
#&gt; 5  -0.1044 0.4489 -0.2325 
#&gt; 6   0.3183 0.3296  0.9657 
#&gt; 7  -1.4026 0.5256 -2.6687 
#&gt; 8   0.2270 0.4082  0.5560 
#&gt; 9   0.0804 0.4226  0.1903 
#&gt; 10 -0.4538 0.4002 -1.1338 
#&gt; 11 -0.0704 0.3993 -0.1764 
#&gt; 12  1.1763 0.7867  1.4954 
#&gt; 13  0.7315 0.3529  2.0730 
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


