<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>(Cluster) Robust Tests and Confidence Intervals for 'rma' Objects — robust • metafor</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="(Cluster) Robust Tests and Confidence Intervals for 'rma' Objects — robust" />

<meta property="og:description" content="The function provides (cluster) robust tests and confidence intervals of the model coefficients for objects of class &quot;rma&quot;." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metafor</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/metafor-package.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/pkgdown/diagram.html">Diagram</a>
</li>
<li>
  <a href="https://www.jstatsoft.org/index.php/jss/article/view/v036i03/v36i03.pdf">JSS Article (pdf)</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://twitter.com/wviechtb">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/wviechtb/metafor">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>(Cluster) Robust Tests and Confidence Intervals for 'rma' Objects</h1>
    
    <div class="hidden name"><code>robust.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>The function provides (cluster) robust tests and confidence intervals of the model coefficients for objects of class <code>"rma"</code>.</p>
    
    </div>

    <pre class="usage">robust(x, cluster, &#8230;)

# S3 method for rma.uni
robust(x, cluster, adjust=TRUE, digits, &#8230;)
# S3 method for rma.mv
robust(x, cluster, adjust=TRUE, digits, &#8230;)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>an object of class <code>"rma.uni"</code> or <code>"rma.mv"</code>.</p></td>
    </tr>
    <tr>
      <th>cluster</th>
      <td><p>a vector specifying a clustering variable to use for constructing the sandwich estimator of the variance-covariance matrix.</p></td>
    </tr>
    <tr>
      <th>adjust</th>
      <td><p>logical indicating whether a small-sample correction should be applied to the variance-covariance matrix.</p></td>
    </tr>
    <tr>
      <th>digits</th>
      <td><p>integer specifying the number of decimal places to which the printed results should be rounded (if unspecified, the default is to take the value from the object).</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>other arguments.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The function constructs a (cluster) robust estimate of the variance-covariance matrix of the model coefficients based on a sandwich-type estimator and then computes tests and confidence intervals of the model coefficients.</p>
<p>Tests of individual coefficients and confidence intervals are based on a t-distribution with \(n-p\) degrees of freedom is used, while the omnibus test statistic uses an F-distribution with \(m\) and \(n-p\) degrees of freedom, where \(n\) is the number of clusters, \(p\) denotes the total number of model coefficients (including the intercept if it is present), and \(m\) denotes the number of coefficients tested (in the omnibus test).</p>
<p>When <code>adjust=TRUE</code> (the default), the (cluster) robust estimate of the variance-covariance matrix is multiplied by the factor \(n/(n-p)\), which serves as a small-sample adjustment that tends to improve the performance of the method when the number of clusters is small.</p>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>"robust.rma"</code>. The object is a list containing the following components:</p>
<dt>beta</dt><dd><p>estimated coefficients of the model.</p></dd>
   <dt>se</dt><dd><p>robust standard errors of the coefficients.</p></dd>
   <dt>zval</dt><dd><p>test statistics of the coefficients.</p></dd>
   <dt>pval</dt><dd><p>p-values for the test statistics.</p></dd>
   <dt>ci.lb</dt><dd><p>lower bound of the confidence intervals for the coefficients.</p></dd>
   <dt>ci.ub</dt><dd><p>upper bound of the confidence intervals for the coefficients.</p></dd>
   <dt>vb</dt><dd><p>robust variance-covariance matrix of the estimated coefficients.</p></dd>
   <dt>QM</dt><dd><p>test statistic for the omnibus test of coefficients.</p></dd>
   <dt>QMp</dt><dd><p>p-value for the omnibus test of coefficients.</p></dd>
   <dt>&#8230;</dt><dd><p>some additional elements/values.</p></dd>

   The results are formatted and printed with the <a href='print.robust.rma.html'>print.robust.rma</a> function.

    
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>The variable specified via <code>cluster</code> is assumed to be of the same length as the data originally passed to the <code>rma.uni</code> or <code>rma.mv</code> function. Any subsetting and removal of studies with missing values as done when fitting the original model is also automatically applied to the variable specified via <code>cluster</code>.</p>
<p>The idea of the robust (sandwich-type) estimator for models with unspecified heteroscedasticity can be traced back to Eicker (1967), Huber (1967), and White (1980). Hence, the method in general is often referred to as the Eicker-Huber-White method. Some small-sample improvements to the method are described by MacKinnon and White (1985). The extension to the cluster robust estimator can be found in Froot (1989) and Williams (2000). Cameron and Miller (2015) provide an extensive overview of cluster robust methods. Sidik and Jonkman (2005, 2006) introduced robust methods in the meta-analytic context for standard random/mixed-effects models. The use of the cluster robust estimator for multivariate/multilevel meta-analytic models is described in Hedges, Tipton, and Johnson (2010).</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Cameron, A. C., &amp; Miller, D. L. (2015). A practitioner's guide to cluster-robust inference. <em>Journal of Human Resources</em>, <b>50</b>, 317--372.</p>
<p>Eicker, F. (1967). Limit theorems for regressions with unequal and dependent errors. In L. M. LeCam &amp; J. Neyman (Eds.), <em>Proceedings of the Fifth Berkeley Symposium on Mathematical Statistics and Probability</em> (pp. 59--82). Berkeley: University of California Press.</p>
<p>Froot, K. A. (1989). Consistent covariance matrix estimation with cross-sectional dependence and heteroskedasticity in financial data. <em>Journal of Financial and Quantitative Analysis</em>, <b>24</b>, 333--355.</p>
<p>Hedges, L. V., Tipton, E., &amp; Johnson, M. C. (2010). Robust variance estimation in meta-regression with dependent effect size estimates. <em>Research Synthesis Methods</em>, <b>1</b>, 39--65.</p>
<p>Huber, P. (1967). The behavior of maximum-likelihood estimates under nonstandard conditions. In L. M. LeCam &amp; J. Neyman (Eds.), <em>Proceedings of the Fifth Berkeley Symposium on Mathematical Statistics and Probability</em> (pp. 221--233). Berkeley: University of California Press.</p>
<p>MacKinnon, J. G., &amp; White, H. (1985). Some heteroskedasticity-consistent covariance matrix estimators with improved finite sample properties. <em>Journal of Econometrics</em>, 29, 305--325.</p>
<p>Sidik, K., &amp; Jonkman, J. N. (2005). A note on variance estimation in random effects meta-regression. <em>Journal of Biopharmaceutical Statistics</em>, <b>15</b>, 823--838.</p>
<p>Sidik, K., &amp; Jonkman, J. N. (2006). Robust variance estimation for random effects meta-analysis. <em>Computational Statistics &amp; Data Analysis</em>, <b>50</b>, 3681--3701.</p>
<p>White, H. (1980). A heteroskedasticity-consistent covariance matrix estimator and a direct test for heteroskedasticity. <em>Econometrica</em>, <b>48</b>, 817--838.</p>
<p>Williams, R. L. (2000). A note on robust variance estimation for cluster-correlated data. <em>Biometrics</em>, <b>56</b>, 645--646.</p>
<p>Viechtbauer, W. (2010). Conducting meta-analyses in R with the metafor package. <em>Journal of Statistical Software</em>, <b>36</b>(3), 1--48. <a href='http://www.jstatsoft.org/v36/i03/'>http://www.jstatsoft.org/v36/i03/</a>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='rma.uni.html'>rma.uni</a></code>, <code><a href='rma.mv.html'>rma.mv</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### load data</span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>get</span>(<span class='fu'>data</span>(<span class='no'>dat.konstantopoulos2011</span>))

<span class='co'>### multilevel random-effects model</span>
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='rma.mv.html'>rma.mv</a></span>(<span class='no'>yi</span>, <span class='no'>vi</span>, <span class='kw'>random</span> <span class='kw'>=</span> ~ <span class='fl'>1</span> <span class='kw'>|</span> <span class='no'>district</span>/<span class='no'>school</span>, <span class='kw'>data</span><span class='kw'>=</span><span class='no'>dat</span>)
<span class='no'>res</span></div><div class='output co'>#&gt; 
#&gt; Multivariate Meta-Analysis Model (k = 56; method: REML)
#&gt; 
#&gt; Variance Components:
#&gt; 
#&gt;             estim    sqrt  nlvls  fixed           factor 
#&gt; sigma^2.1  0.0651  0.2551     11     no         district 
#&gt; sigma^2.2  0.0327  0.1809     56     no  district/school 
#&gt; 
#&gt; Test for Heterogeneity:
#&gt; Q(df = 55) = 578.8640, p-val &lt; .0001
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt; estimate      se    zval    pval   ci.lb   ci.ub 
#&gt;   0.1847  0.0846  2.1845  0.0289  0.0190  0.3504  * 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'>
<span class='co'>### results based on sandwich method</span>
<span class='fu'>robust</span>(<span class='no'>res</span>, <span class='kw'>cluster</span><span class='kw'>=</span><span class='no'>dat</span>$<span class='no'>district</span>)</div><div class='output co'>#&gt; 
#&gt; Number of outcomes:   56
#&gt; Number of clusters:   11
#&gt; Outcomes per cluster: 3-11 (mean: 5.09, median: 4)
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt; estimate      se    tval    pval    ci.lb   ci.ub 
#&gt;   0.1847  0.0845  2.1859  0.0537  -0.0036  0.3730  . 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'>
<span class='co'>### load data</span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'>get</span>(<span class='fu'>data</span>(<span class='no'>dat.berkey1998</span>))

<span class='co'>### construct list of the variance-covariance matrices of the observed outcomes for the studies</span>
<span class='no'>V</span> <span class='kw'>&lt;-</span> <span class='fu'>lapply</span>(<span class='fu'>split</span>(<span class='no'>dat</span>[,<span class='fu'>c</span>(<span class='st'>"v1i"</span>, <span class='st'>"v2i"</span>)], <span class='no'>dat</span>$<span class='no'>trial</span>), <span class='no'>as.matrix</span>)

<span class='co'>### construct block diagonal matrix</span>
<span class='no'>V</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='bldiag.html'>bldiag</a></span>(<span class='no'>V</span>)

<span class='co'>### fit multivariate model</span>
<span class='no'>res</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='rma.mv.html'>rma.mv</a></span>(<span class='no'>yi</span>, <span class='no'>V</span>, <span class='kw'>mods</span> <span class='kw'>=</span> ~ <span class='no'>outcome</span> - <span class='fl'>1</span>, <span class='kw'>random</span> <span class='kw'>=</span> ~ <span class='no'>outcome</span> <span class='kw'>|</span> <span class='no'>trial</span>, <span class='kw'>struct</span><span class='kw'>=</span><span class='st'>"UN"</span>, <span class='kw'>data</span><span class='kw'>=</span><span class='no'>dat</span>)
<span class='no'>res</span></div><div class='output co'>#&gt; 
#&gt; Multivariate Meta-Analysis Model (k = 10; method: REML)
#&gt; 
#&gt; Variance Components:
#&gt; 
#&gt; outer factor: trial   (nlvls = 5)
#&gt; inner factor: outcome (nlvls = 2)
#&gt; 
#&gt;             estim    sqrt  k.lvl  fixed  level 
#&gt; tau^2.1    0.0327  0.1807      5     no     AL 
#&gt; tau^2.2    0.0117  0.1083      5     no     PD 
#&gt; 
#&gt;     rho.AL  rho.PD    AL  PD 
#&gt; AL       1  0.6088     -  no 
#&gt; PD  0.6088       1     5   - 
#&gt; 
#&gt; Test for Residual Heterogeneity:
#&gt; QE(df = 8) = 128.2267, p-val &lt; .0001
#&gt; 
#&gt; Test of Moderators (coefficients 1:2):
#&gt; QM(df = 2) = 108.8616, p-val &lt; .0001
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt;            estimate      se     zval    pval    ci.lb    ci.ub 
#&gt; outcomeAL   -0.3392  0.0879  -3.8589  0.0001  -0.5115  -0.1669  *** 
#&gt; outcomePD    0.3534  0.0588   6.0057  &lt;.0001   0.2381   0.4688  *** 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div><div class='input'>
<span class='co'>### results based on sandwich method</span>
<span class='fu'>robust</span>(<span class='no'>res</span>, <span class='kw'>cluster</span><span class='kw'>=</span><span class='no'>dat</span>$<span class='no'>trial</span>)</div><div class='output co'>#&gt; 
#&gt; Number of outcomes:   10
#&gt; Number of clusters:   5
#&gt; Outcomes per cluster: 2
#&gt; 
#&gt; Test of Moderators (coefficients 1:2):
#&gt; F(df1 = 2, df2 = 3) = 41.6138, p-val = 0.0065
#&gt; 
#&gt; Model Results:
#&gt; 
#&gt;            estimate      se     tval    pval    ci.lb    ci.ub 
#&gt; outcomeAL   -0.3392  0.1010  -3.3597  0.0437  -0.6605  -0.0179  * 
#&gt; outcomePD    0.3534  0.0675   5.2338  0.0136   0.1385   0.5683  * 
#&gt; 
#&gt; ---
#&gt; Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1
#&gt; </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#value">Value</a></li>

      <li><a href="#note">Note</a></li>

      <li><a href="#references">References</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
   Wolfgang Viechtbauer <a href='mailto:wvb@metafor-project.org'>wvb@metafor-project.org</a> <a href='http://www.metafor-project.org/'>http://www.metafor-project.org/</a>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Wolfgang Viechtbauer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

